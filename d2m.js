const devanagari = $('#devanagari');
const modi = $('#modi');
const convertBtn = $('#convert-btn');
const copyBtn = $('#copy-btn');

const scriptMap = {
    'à¤…': 'ğ‘˜€', 'à¤†': 'ğ‘˜', 'à¤‡': 'ğ‘˜‚', 'à¤ˆ': 'ğ‘˜ƒ', 'à¤‰': 'ğ‘˜„', 'à¤Š': 'ğ‘˜…',
    'à¤‹': 'ğ‘˜†', 'à¤‹': 'ğ‘˜‡', 'à¤Œ': 'ğ‘˜ˆ', 'à¥¡': 'ğ‘˜‰', 'à¤': 'ğ‘˜Š', 'à¤': 'ğ‘˜‹',
    'à¤“': 'ğ‘˜Œ', 'à¤”': 'ğ‘˜',
    'à¥²': 'ğ‘˜€ğ‘™€', 'à¤‘': 'ğ‘˜ğ‘™€',
    'à¤•': 'ğ‘˜', 'à¤–': 'ğ‘˜', 'à¤—': 'ğ‘˜', 'à¤˜': 'ğ‘˜‘', 'à¤™': 'ğ‘˜’',
    'à¤š': 'ğ‘˜“', 'à¤›': 'ğ‘˜”', 'à¤œ': 'ğ‘˜•', 'à¤': 'ğ‘˜–', 'à¤': 'ğ‘˜—',
    'à¤Ÿ': 'ğ‘˜˜', 'à¤ ': 'ğ‘˜™', 'à¤¡': 'ğ‘˜š', 'à¤¢': 'ğ‘˜›', 'à¤£': 'ğ‘˜œ',
    'à¤¤': 'ğ‘˜', 'à¤¥': 'ğ‘˜', 'à¤¦': 'ğ‘˜Ÿ', 'à¤§': 'ğ‘˜ ', 'à¤¨': 'ğ‘˜¡',
    'à¤ª': 'ğ‘˜¢', 'à¤«': 'ğ‘˜£', 'à¤¬': 'ğ‘˜¤', 'à¤­': 'ğ‘˜¥', 'à¤®': 'ğ‘˜¦',
    'à¤¯': 'ğ‘˜§', 'à¤°': 'ğ‘˜¨', 'à¤²': 'ğ‘˜©', 'à¤µ': 'ğ‘˜ª',
    'à¤¶': 'ğ‘˜«', 'à¤·': 'ğ‘˜¬', 'à¤¸': 'ğ‘˜­', 'à¤¹': 'ğ‘˜®',
    'à¤³': 'ğ‘˜¯',
    'à¥': 'ğ‘˜¿', 'à¤¾': 'ğ‘˜°', 'à¤¿': 'ğ‘˜±', 'à¥€': 'ğ‘˜²', 'à¥': 'ğ‘˜³', 'à¥‚': 'ğ‘˜´',
    'à¥ƒ': 'ğ‘˜µ', 'à¥„': 'ğ‘˜¶', 'à¥¢': 'ğ‘˜·', 'à¥£': 'ğ‘˜¸', 'à¥‡': 'ğ‘˜¹', 'à¥ˆ': 'ğ‘˜º',
    'à¥‹': 'ğ‘˜»', 'à¥Œ': 'ğ‘˜¼', 'à¤‚': 'ğ‘˜½', 'à¤ƒ': 'ğ‘˜¾', 'à¥…': 'ğ‘™€',
    'à¥§': 'ğ‘™‘', 'à¥¨': 'ğ‘™’', 'à¥©': 'ğ‘™“', 'à¥ª': 'ğ‘™”', 'à¥«': 'ğ‘™•',
    'à¥¬': 'ğ‘™–', 'à¥­': 'ğ‘™—', 'à¥®': 'ğ‘™˜', 'à¥¯': 'ğ‘™™', 'à¥¦': 'ğ‘™',
    '!': '!', '"': '"', '#': '#', '$': '$', '%': '%', '&': '&',
    '\'': '\'', '(': '(', ')': ')', '*': '*', '+': '+', ',': ',',
    '-': '-', '.': '.', '/': '/', ':': ':', ';': ';', '<': '<',
    '=': '=', '>': '>', '?': '?', '@': '@', '[': '[', '\\': '\\',
    ']': ']', '^': '^', '_': '_', '`': '`', '{': '{', '|': '|',
    '}': '}', '~': '~', ' ': ' ', '\n': '\n', '\t': '\t'
}

$(document).ready(function () {
});

convertBtn.on('click', function () {
    const text = devanagari.val().trim();
    text === '' ? copyBtn.attr('disabled', true) : copyBtn.attr('disabled', false);
    let str = "";
    for (let c of text) {
        if (scriptMap[c]) {
            str += scriptMap[c];
        }
        else {
            str = `This text cannot be converted into Moá¸Ä« script because of letter '${c}'`;
            copyBtn.attr('disabled', true);
            break;
        }
    }
    modi.val(str);
});

copyBtn.on('click', function () {
    navigator.clipboard.writeText(modi.val()).then(function () {
        copyBtn.text("Copied");
        copyBtn.attr('disabled', true);
        setTimeout(function () {
            copyBtn.text("Copy");
            copyBtn.attr('disabled', false);
        }, 2000);
    }, function () {
        alert("Failed to copy text!");
    });
});